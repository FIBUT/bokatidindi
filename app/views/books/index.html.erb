<main role="main" aria-label="Bækur">

  <% unless params[:publisher] || params[:category] || params[:author] %>
  <h1>Allar bækur</h1>
  <% else %>
  <h1>Niðurstöður leitar</h1>
  <ul>
    <% unless params[:author].nil? %>
    <li>
      <strong>Höfundur</strong>
      <%= Author.find_by(slug: params[:author]).name %>
    </li>
    <% end %>
    <% unless params[:publisher].nil? %>
    <li>
      <strong>Útgefandi</strong>
      <%= Publisher.find_by(slug: params[:publisher]).name %>
    </li>
    <% end %>
    <% unless params[:category].nil? %>
    <li>
      <strong>Vöruflokkur</strong>
      <%= Category.find_by(slug: params[:category]).name %>
    </li>
    <% end %>
  </ul>
  <% end %>

  <p id="notice"><%= notice %></p>

  <div class="row justify-content-center">

  <% @books.each do |book| %>
  <section
    id="book-<%= book.id %>"
    class="book col-xl-4 col-lg-6 col-sm-12 p-5"
    aria-labelledby="book-<%= book.id %>-hgroup"
  >

    <div class="row">

      <div class="col-xl-6 col-lg-6 col-sm-6 p-3">
        <a href="<%= book_path(book.slug) %>">
          <%= render 'books/figure', book: book %>
        </a>
      </div>

      <div class="col-xl-6 col-lg-6">

      <a href="<%= book_path(book.slug) %>">
        <%= render 'books/hgroup', book: book %>
      </a>

      <%= render 'books/authors', book: book %>

      <% unless book.description.empty? %>

      <p
        aria-label="Lýsing"
        class="book-description overflow-hidden"
      >
        <%= book.short_description %>
      </p>

      <% end %>

      <%= render 'books/meta', book: book %>

      <%= render 'books/binding_types', book: book %>

      <%= link_to 'Meira', book_path(book.slug), class: "btn btn-primary" %>

      </div>

    </div>
  </section>

  <% end %>

  </div>

  <%= paginate @books %>

</main>